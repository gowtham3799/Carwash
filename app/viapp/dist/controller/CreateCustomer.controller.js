sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/core/BusyIndicator","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox"],function(e,t,a,o,r,i){"use strict";return e.extend("viapp.controller.CreateCustomer",{onInit:function(){this._oRouter=sap.ui.core.UIComponent.getRouterFor(this);this._oRouter.attachRouteMatched(this.handleRouteMatched,this)},onAfterRendering:function(){this.oBundle=this.getView().getModel("i18n").getResourceBundle();this._ModelInitialLoad()},_ModelInitialLoad:function(){var e={CC_FirstName:"",CC_LastName:"",CC_Email:"",CC_MobileNo:"",CC_HouseNo:"",CC_Street:"",CC_City:"",CC_PostalCode:"",CC_Country:"",CC_Remark:"",CC_FirstName_ValueState:"None",CC_MobileNo_ValueState:"None",AddVehicleData:[],CC_AddVehicleSwitch:false,CC_Emirates:"",CC_Category:"",CC_PlateCode:"",CC_PlateNo:"",CC_VINNo:"",CC_Manfacturer:"",CC_Model:"",CC_CarType:"",CC_FuelType:"",CC_Year:"",AddVehicleList:[],EmiratesF4:[{Emirates:"Abu Dhabi"},{Emirates:"Dubai"},{Emirates:"Sharjah"},{Emirates:"Ajman"},{Emirates:"Umm Al Quwain"},{Emirates:"Ras Al Khaimah"},{Emirates:"Fujairah"},{Emirates:"Others"}],PlateCategoryF4:[{Category:"Classic"},{Category:"Export"},{Category:"MotorCycle"},{Category:"Other"},{Category:"Private"},{Category:"Taxi"},{Category:"Police"},{Category:"Trade Plate"}],PlateCodeF4:[{PlateCode:"A"},{PlateCode:"1"},{PlateCode:"B"},{PlateCode:"2"},{PlateCode:"C"},{PlateCode:"3"},{PlateCode:"D"},{PlateCode:"4"}],FuelTypeF4:[{FuelType:"Diesel"},{FuelType:"Petrol"},{FuelType:"Gas"},{FuelType:"Electric"},{FuelType:"Others"}],ManufacturerF4:[{Manufacture:"Audi"},{Manufacture:"BMW"},{Manufacture:"Benz"},{Manufacture:"Ford"},{Manufacture:"Ferrari"},{Manufacture:"Hyundai"},{Manufacture:"Honda"},{Manufacture:"Land Rover"},{Manufacture:"Porsche"},{Manufacture:"Rolls-Royce"},{Manufacture:"Toyota"},{Manufacture:"Others"}],ModelF4Set:[{Manufacture:"Audi",Model:"A1"},{Manufacture:"Audi",Model:"A2"},{Manufacture:"Audi",Model:"A3"},{Manufacture:"Audi",Model:"Q1"},{Manufacture:"Audi",Model:"Q3"},{Manufacture:"BMW",Model:"X1"},{Manufacture:"BMW",Model:"X3"},{Manufacture:"BMW",Model:"M2"},{Manufacture:"Benz",Model:"EQS"},{Manufacture:"Benz",Model:"GLB"},{Manufacture:"Benz",Model:"GLC"},{Manufacture:"Ford",Model:"Aerostar"},{Manufacture:"Ford",Model:"Mustang"},{Manufacture:"Ford",Model:"EcoSport"},{Manufacture:"Ferrari",Model:"F8 Tributo"},{Manufacture:"Hyundai",Model:"Creta"},{Manufacture:"Honda",Model:"Amaze"},{Manufacture:"Land Rover",Model:"Range Rover"},{Manufacture:"Land Rover",Model:"Defender"},{Manufacture:"Porsche",Model:"GTS"},{Manufacture:"Rolls-Royce",Model:"Ghost"},{Manufacture:"Rolls-Royce",Model:"Cullinan"},{Manufacture:"Toyota",Model:"Glanza"},{Manufacture:"Others"}],ModelF4:[]};var t=new sap.ui.model.json.JSONModel(e);this.getView().setModel(t,"oViewModel")},onPressSaveCustomer:function(){var e=this.getView().getModel("oViewModel").getData();if(e.CC_FirstName!==""&&e.CC_MobileNo!==""){t.show("Customer created successfully");this.onClearCNCInput()}else{if(e.CC_FirstName===""){e.CC_FirstName_ValueState="Error";this.getView().getModel("oViewModel").setProperty("/CC_FirstName_ValueState","Error")}if(e.CC_MobileNo===""){e.CC_MobileNo_ValueState="Error";this.getView().getModel("oViewModel").setProperty("/CC_MobileNo_ValueState","Error")}t.show("Please fill mandatory details");this.getView().getModel("oViewModel").refresh(true)}},onMobileNoLiveChange:function(e){var a=e.getSource().getValue();if(a.charAt(0)==="0"){t.show("Mobile number does not start with zero");e.getSource().setValue("")}else{var o=a.replace(/\D/g,"");e.getSource().setValue(o);if(a.length>9){this.getView().getModel("oViewModel").setProperty("/CC_MobileNo_ValueState","None")}else{this.getView().getModel("oViewModel").setProperty("/CC_MobileNo_ValueState","Error")}}},onFirstNameLiveChange:function(e){var t=e.getSource().getValue();t=t.replace(/[^a-zA-Z0-9_ ]/g,"");e.getSource().setValue(t);if(t.length>2){this.getView().getModel("oViewModel").setProperty("/CC_FirstName_ValueState","Information")}else{this.getView().getModel("oViewModel").setProperty("/CC_FirstName_ValueState","Error")}},onExit:function(){},onPressAddVehicle:function(){var e=this.getView().getModel("oViewModel").getProperty("/AddVehicleData");e.push({Customer:"",PlateNo:"",PlateC:"",PlateCat:"",Vin:"",Emirates:""});this.getView().getModel("oViewModel").setProperty("/AddVehicleData",e)},onPressDelete:function(e){var t=this.getView().getModel("oViewModel");var a=e.getSource().getBindingContext("oViewModel").getPath();var o=parseInt(a.substring(a.lastIndexOf("/")+1),10);sap.m.MessageBox.confirm("Are you sure want to Delete?",{icon:sap.m.MessageBox.Icon.CONFIRM,title:"Confirmation",actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:function(e){if(e==="YES"){var a=t.getProperty("/AddVehicleList");a.splice(o,1);t.setProperty("/AddVehicleList",a);t.refresh()}else if(e==="NO"){}}})},onSwitchAddVehicle:function(e){var t=e.getSource().getState();if(t){if(!this.AddVehicleToCustomer){this.AddVehicleToCustomer=sap.ui.xmlfragment("viapp.fragment.TagVehicleToCustomer",this);this.getView().addDependent(this.AddVehicleToCustomer)}this.AddVehicleToCustomer.open()}else if(!t){}},onCancelTagVehicleToCustomer:function(){this.AddVehicleToCustomer.close();this.getView().getModel("oViewModel").setProperty("/CC_AddVehicleSwitch",false)},onOpenManufactureF4:function(e){this.source=e.getSource();if(!this.Manfacturer){this.Manfacturer=sap.ui.xmlfragment("viapp.fragment.ManfacturerF4",this);this.getView().addDependent(this.Manfacturer)}this.Manfacturer.open()},onSearchManufacture:function(e){var t=e.getParameters().value;var a=["Manufacture"];var o=e.getSource().getBinding("items");this.onSearchF4(t,a,o)},onSearchModel:function(e){var t=e.getParameters().value;var a=["Model"];var o=e.getSource().getBinding("items");this.onSearchF4(t,a,o)},onSearchF4:function(e,t,a){var i=[];for(var l=0;l<t.length;l++){i.push(new o(t[l],r.Contains,e))}var C=new o(i);a.filter([C])},onManfacturerConfirm:function(e){var t=this.getView().getModel("oViewModel");t.setProperty("/CC_Model","");t.getData().CC_Manfacturer=e.getParameter("selectedItem").getBindingContext("oViewModel").getObject().Manufacture;e.getSource().getBinding("items").filter([]);var a=t.getProperty("/ModelF4Set");var o=[];o=a.filter(function(e){return e.Manufacture===t.getData().CC_Manfacturer});t.setProperty("/ModelF4",o);t.refresh()},onOpenModelF4:function(e){this.source=e.getSource();if(!this.ModelF4){this.ModelF4=sap.ui.xmlfragment("viapp.fragment.ModelF4",this);this.getView().addDependent(this.ModelF4)}this.ModelF4.open()},onModelConfirm:function(e){var t=this.getView().getModel("oViewModel");t.getData().CC_Model=e.getParameter("selectedItem").getBindingContext("oViewModel").getObject().Model;t.refresh();e.getSource().getBinding("items").filter([])},onRefreshProcess:function(){var e=this.getView().getModel("oViewModel");e.getData().CC_Emirates="";e.getData().CC_Category="";e.getData().CC_PlateCode="";e.getData().CC_PlateNo="";e.getData().CC_VINNo="";e.getData().CC_Manfacturer="";e.getData().CC_Model="";e.getData().CC_CarType="";e.getData().CC_FuelType="";e.getData().CC_Year="";e.refresh()},onClearCNCInput:function(){var e=this.getView().getModel("oViewModel");e.getData().CC_FirstName="";e.getData().CC_LastName="";e.getData().CC_Email="";e.getData().CC_MobileNo="";e.getData().CC_HouseNo="";e.getData().CC_Street="";e.getData().CC_City="";e.getData().CC_PostalCode="";e.getData().CC_Country="";e.getData().CC_Remark="";e.getData().AddVehicleList=[];e.getData().AddVehicleList="";e.getData().CC_FirstName_ValueState="None";e.getData().CC_MobileNo_ValueState="None";e.getData().CC_AddVehicleSwitch=false;e.refresh()},onVINInputLiveChange:function(e){var t=e.getSource().getValue();var a=e.getSource();a.setValue(a.getValue().toUpperCase());var t=t.replace(/[^a-zA-Z0-9 ]/g,"");t=t.split(" ").join("");e.getSource().setValue(t);e.getSource().setValue(t.toUpperCase())},onPressAddvehicle:function(){var e=this.getView().getModel("oViewModel");if(e.getData().CC_Emirates!==""&&e.getData().CC_Category!==""&&e.getData().CC_PlateCode!==""&&e.getData().CC_PlateNo!==""&&e.getData().CC_Manfacturer!==""&&e.getData().CC_Model!==""){var a={CC_Emirates:e.getData().CC_Emirates,CC_Category:e.getData().CC_Category,CC_PlateCode:e.getData().CC_PlateCode,CC_PlateNo:e.getData().CC_PlateNo,CC_VINNo:e.getData().CC_VINNo,CC_Manfacturer:e.getData().CC_Manfacturer,CC_Model:e.getData().CC_Model,CC_CarType:e.getData().CC_CarType,CC_FuelType:e.getData().CC_FuelType,CC_Year:e.getData().CC_Year};e.getData().AddVehicleList.push(a);e.getData().CC_AddVehicleSwitch=false;e.refresh();this.onRefreshProcess()}else{t.show("Please fill mandatory details")}},onPlateNoInputLiveChange:function(e){var t=e.getSource().getValue();var a=t.replace(/\D/g,"");e.getSource().setValue(a)},onCloseCreateCustomer:function(){this._oRouter=sap.ui.core.UIComponent.getRouterFor(this);this._oRouter.navTo("Home",false)}})});
//# sourceMappingURL=CreateCustomer.controller.js.map