{"version":3,"file":"findpat.js","names":["MIN_SKIP","MAX_MODULES","INTEGER_MATH_SHIFT","CENTER_QUORUM","qrcode","orderBestPatterns","patterns","distance","pattern1","pattern2","xDiff","X","yDiff","Y","Math","sqrt","crossProductZ","pointA","pointB","pointC","bX","x","bY","y","zeroOneDistance","oneTwoDistance","zeroTwoDistance","temp","FinderPattern","posX","posY","estimatedModuleSize","this","count","__defineGetter__","incrementCount","aboutEquals","moduleSize","i","j","abs","moduleSizeDiff","FinderPatternInfo","patternCenters","bottomLeft","topLeft","topRight","FinderPatternFinder","image","possibleCenters","hasSkipped","crossCheckStateCount","Array","resultPointCallback","foundPatternCross","stateCount","totalModuleSize","floor","maxVariance","centerFromEnd","end","crossCheckVertical","startI","centerJ","maxCount","originalStateCountTotal","maxI","height","CrossCheckStateCount","width","NaN","stateCountTotal","crossCheckHorizontal","startJ","centerI","maxJ","handlePossibleCenter","isNaN","found","max","length","index","center","point","push","foundPossibleResultPoint","selectBestPatterns","startSize","square","centerValue","EstimatedModuleSize","average","sort","center1","center2","dA","dB","stdDev","limit","pattern","splice","a","b","findRowSkip","firstConfirmedCenter","Count","haveMultiplyConfirmedCenters","confirmedCount","totalDeviation","findFinderPattern","tryHarder","iSkip","done","currentState","confirmed","rowSkip","patternInfo"],"sources":["findpat-dbg.js"],"mappings":"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","ignoreList":[]}