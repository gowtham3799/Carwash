{"version":3,"file":"detector.js","names":["PerspectiveTransform","a11","a21","a31","a12","a22","a32","a13","a23","a33","this","transformPoints1","points","max","length","i","x","y","denominator","transformPoints2","xValues","yValues","n","buildAdjoint","times","other","quadrilateralToQuadrilateral","x0","y0","x1","y1","x2","y2","x3","y3","x0p","y0p","x1p","y1p","x2p","y2p","x3p","y3p","qToS","quadrilateralToSquare","sToQ","squareToQuadrilateral","dy2","dy3","dx1","dx2","dx3","dy1","DetectorResult","bits","Detector","image","resultPointCallback","sizeOfBlackWhiteBlackRun","fromX","fromY","toX","toY","steep","Math","abs","temp","dx","dy","error","ystep","xstep","state","realX","realY","qrcode","width","diffX","diffY","sqrt","diffX2","diffY2","sizeOfBlackWhiteBlackRunBothWays","result","scale","otherToX","otherToY","floor","height","calculateModuleSizeOneWay","pattern","otherPattern","moduleSizeEst1","X","Y","moduleSizeEst2","isNaN","calculateModuleSize","topLeft","topRight","bottomLeft","distance","pattern1","pattern2","xDiff","yDiff","computeDimension","moduleSize","tltrCentersDimension","round","tlblCentersDimension","dimension","findAlignmentInRegion","overallEstModuleSize","estAlignmentX","estAlignmentY","allowanceFactor","allowance","alignmentAreaLeftX","alignmentAreaRightX","min","alignmentAreaTopY","alignmentAreaBottomY","alignmentFinder","AlignmentPatternFinder","find","createTransform","alignmentPattern","dimMinusThree","bottomRightX","bottomRightY","sourceBottomRightX","sourceBottomRightY","transform","sampleGrid","sampler","GridSampler","sampleGrid3","processFinderPatternInfo","info","TopLeft","TopRight","BottomLeft","provisionalVersion","Version","getProvisionalVersionForDimension","modulesBetweenFPCenters","DimensionForVersion","AlignmentPatternCenters","correctionToTopLeft","Array","detect","FinderPatternFinder","findFinderPattern"],"sources":["detector-dbg.js"],"mappings":"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","ignoreList":[]}